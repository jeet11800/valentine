<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Valentine üíò</title>
  <style>
    :root{
      --bg1:#ffd1dc; --bg2:#ffe6f2; --card:#ffffffcc;
      --yes:#22c55e; --no:#ef4444; --text:#7a1f3d;
    }
    *{box-sizing:border-box}
    body{
      margin:0; min-height:100vh; display:grid; place-items:center;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: radial-gradient(circle at 30% 20%, var(--bg2), var(--bg1));
      overflow:hidden;
    }
    .hearts{
      position:fixed; inset:0; pointer-events:none; opacity:.35;
      background:
        radial-gradient(circle at 10% 20%, #ff7aa2 0 2px, transparent 3px),
        radial-gradient(circle at 70% 10%, #ff4d88 0 2px, transparent 3px),
        radial-gradient(circle at 40% 80%, #ff7aa2 0 2px, transparent 3px),
        radial-gradient(circle at 90% 60%, #ff4d88 0 2px, transparent 3px);
      filter: blur(.2px);
    }
    .card{
      width:min(520px, 92vw);
      padding:28px 22px;
      background:var(--card);
      border:1px solid #ffffff80;
      border-radius:24px;
      box-shadow:0 20px 60px rgba(0,0,0,.12);
      text-align:center;
      position:relative;
      backdrop-filter: blur(10px);
    }
    h1{
      margin:10px 0 10px;
      color:var(--text);
      font-size: clamp(22px, 4.5vw, 34px);
      letter-spacing:.2px;
    }
    .sub{
      margin:0 0 14px;
      color:#8a2a4a;
      font-size: 14px;
      opacity:.9;
    }
    .photo{
      width:min(280px, 78vw);
      aspect-ratio: 1 / 1;
      border-radius:22px;
      margin:10px auto 16px;
      overflow:hidden;
      display:grid;
      place-items:center;
      background:linear-gradient(135deg,#ffe6f2,#ffd1dc);
      border:1px solid #ffffffa8;
      position:relative;
    }
    .photo img{ width:100%; height:100%; object-fit:cover; }
    .photo .hint{
      position:absolute; inset:auto 10px 10px 10px;
      background:#ffffffc8; border:1px solid #ffffffd0;
      border-radius:14px; padding:8px 10px;
      font-size:12px; color:#6b1636;
    }

    .stage{
      position:relative;
      height: 160px;
      margin-top: 6px;
      user-select:none;
      touch-action: none;
    }
    .btn{
      border:none;
      color:white;
      padding:14px 22px;
      border-radius:16px;
      font-size:18px;
      font-weight:800;
      cursor:pointer;
      box-shadow:0 12px 26px rgba(0,0,0,.18);
      transition: transform .18s ease, filter .18s ease, left .12s ease, top .12s ease;
      will-change: transform, left, top;
    }
    .btn:active{ transform: scale(.98); }

    .btn-yes{
      background:var(--yes);
      position:absolute;
      left:50%;
      top:58%;
      transform: translate(-120%, -50%) scale(1);
      z-index:2;
    }
    .btn-no{
      background:var(--no);
      position:absolute;
      left:50%;
      top:58%;
      transform: translate(20%, -50%) scale(1);
      max-width: 240px;
      white-space: nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
      z-index:3;
    }

    .note{
      margin-top:10px;
      font-size:13px;
      color:#8a2a4a;
      opacity:.85;
    }

    .success{ display:none; padding:18px 16px 10px; }
    .big{
      font-size: clamp(26px, 5vw, 38px);
      margin: 8px 0 6px;
      color: #5a1230;
      font-weight: 950;
    }
    .msg{
      color:#6b1636;
      font-size:16px;
      line-height:1.35;
      margin:0 0 8px;
    }
    .pill{
      display:inline-block;
      margin-top:10px;
      padding:10px 14px;
      border-radius:999px;
      background:#ffffffb0;
      border:1px solid #ffffffd0;
      color:#6b1636;
      font-weight:700;
      font-size:14px;
    }

    canvas#confetti{ position:fixed; inset:0; pointer-events:none; display:none; }
  </style>
</head>
<body>
  <div class="hearts"></div>
  <canvas id="confetti"></canvas>

  <div class="card">
    <div id="main">
      <p class="sub" id="subtitle"></p>

      <!-- Replace the src later with your uploaded photo filename -->
      <div class="photo">
        <img id="photoImg" alt="Us" src="us.jpg">
        <div class="hint">Later: replace photo src with your uploaded image ‚úÖ</div>
      </div>

      <h1 id="question">Will you be my Valentine?</h1>

      <div class="stage" id="stage">
        <button class="btn btn-yes" id="yesBtn">Yes</button>
        <button class="btn btn-no" id="noBtn">No</button>
      </div>

      <div class="note" id="note">Go on‚Ä¶ try tapping ‚ÄúNo‚Äù üòà</div>
    </div>

    <div class="success" id="success">
      <div class="big">YAAAAAY! üíñ</div>
      <p class="msg" id="successMsg"></p>
      <div class="pill">Screenshot this & send it to me üì∏</div>
    </div>
  </div>

  <script>
    // ---------- Personalization ----------
    const YOUR_NAME = "Modak";
    const HER_NAME  = "Rasmalaiiii";
    const SUCCESS_MESSAGE = "I knew it! Can't wait to meet you!!!";
    // ------------------------------------

    document.getElementById("subtitle").innerHTML =
      `Hey <b>${HER_NAME}</b> üíó from <b>${YOUR_NAME}</b>`;
    document.getElementById("successMsg").textContent = SUCCESS_MESSAGE;

    const stage = document.getElementById("stage");
    const yesBtn = document.getElementById("yesBtn");
    const noBtn  = document.getElementById("noBtn");
    const main   = document.getElementById("main");
    const success= document.getElementById("success");
    const note   = document.getElementById("note");

    let dodges = 0;

    // ‚ÄúNo‚Äù behavior like reel: dodge hard + Yes grows
    const noTexts = [
      "No", "Nope", "Are you sure?", "Really??", "Think again üò≠",
      "Bro‚Ä¶", "Don‚Äôt do this üòî", "Last chance", "STOP üò§", "You can‚Äôt üòà"
    ];

    function clamp(n,min,max){ return Math.max(min, Math.min(max, n)); }

    function randomSafePosition(){
      const rect = stage.getBoundingClientRect();
      const btnRect = noBtn.getBoundingClientRect();
      const pad = 10;

      const maxX = Math.max(pad, rect.width - btnRect.width - pad);
      const maxY = Math.max(pad, rect.height - btnRect.height - pad);

      const x = Math.random() * maxX + pad;
      const y = Math.random() * maxY + pad;

      noBtn.style.left = `${x}px`;
      noBtn.style.top  = `${y}px`;
    }

    function dodge(){
      dodges++;

      // Change No text (reel vibe)
      noBtn.textContent = noTexts[clamp(dodges, 0, noTexts.length - 1)];

      // Yes grows noticeably
      const yesScale = 1 + Math.min(dodges * 0.28, 3.2);
      yesBtn.style.transform = `translate(-120%, -50%) scale(${yesScale})`;

      // No shrinks slightly + jitters
      const noScale = Math.max(1 - dodges * 0.08, 0.45);
      const rot = (-10 + Math.random()*20);
      noBtn.style.transform = `translate(20%, -50%) scale(${noScale}) rotate(${rot}deg)`;

      randomSafePosition();

      // Make it even harder to click after a few dodges
      if (dodges >= 5) note.textContent = "Nice try üòå";
      if (dodges >= 8) note.textContent = "Okay okay, just press YES üíö";
    }

    // Desktop: dodge when cursor approaches
    noBtn.addEventListener("mouseenter", dodge);

    // Mobile: dodge on touch (before click registers)
    noBtn.addEventListener("touchstart", (e) => {
      e.preventDefault();
      dodge();
    }, { passive:false });

    // If click still happens, dodge anyway
    noBtn.addEventListener("click", (e) => {
      e.preventDefault();
      dodge();
    });

    // Start with default centered positions
    // Set absolute coordinates for No so random moves work smoothly
    (function initPositions(){
      const rect = stage.getBoundingClientRect();
      // place No roughly on right side inside stage
      noBtn.style.left = `${rect.width * 0.58}px`;
      noBtn.style.top  = `${rect.height * 0.45}px`;
    })();

    yesBtn.addEventListener("click", () => {
      main.style.display = "none";
      success.style.display = "block";
      launchConfetti();
    });

    // ---- Confetti ----
    const canvas = document.getElementById("confetti");
    const ctx = canvas.getContext("2d");
    let confetti = [];

    function resize(){
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    window.addEventListener("resize", resize);
    resize();

    function launchConfetti(){
      canvas.style.display = "block";
      confetti = Array.from({length: 200}, () => ({
        x: Math.random()*canvas.width,
        y: -20 - Math.random()*canvas.height*0.3,
        r: 2 + Math.random()*4,
        vx: -2 + Math.random()*4,
        vy: 2 + Math.random()*6,
        a: Math.random()*Math.PI*2,
        va: -0.25 + Math.random()*0.5
      }));
      requestAnimationFrame(tick);
      setTimeout(() => canvas.style.display = "none", 2200);
    }

    function tick(){
      ctx.clearRect(0,0,canvas.width, canvas.height);
      for(const p of confetti){
        p.x += p.vx;
        p.y += p.vy;
        p.a += p.va;

        // random cute color each frame
        ctx.fillStyle = `hsl(${Math.floor(Math.random()*360)}, 85%, 70%)`;

        // tiny heart particle
        ctx.save();
        ctx.translate(p.x, p.y);
        ctx.rotate(p.a);
        ctx.beginPath();
        ctx.moveTo(0, 0);
        ctx.bezierCurveTo(-p.r, -p.r, -p.r*2, p.r, 0, p.r*2);
        ctx.bezierCurveTo(p.r*2, p.r, p.r, -p.r, 0, 0);
        ctx.fill();
        ctx.restore();
      }
      confetti = confetti.filter(p => p.y < canvas.height + 40);
      if(confetti.length) requestAnimationFrame(tick);
    }
  </script>
</body>
</html>
